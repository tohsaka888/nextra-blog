import { Callout } from "nextra-theme-docs";

# 数据模型

## 对象、值与类型

对象 是 `Python` 中对数据的抽象。 `Python` 程序中的所有数据都是由对象或对象间关系来表示的。
（从某种意义上说，按照冯·诺依曼的“存储程序计算机”模型，代码本身也是由对象来表示的。）
每个对象都有各自的标识号、类型和值。一个对象被创建后，它的 **标识号** 就绝不会改变；你可以将其理解为该对象在内存中的地址。
`'is'` 运算符可以比较两个对象的标识号是否相同；`id()` 函数能返回一个代表其标识号的整数。

对象的类型决定该对象所支持的操作 (例如 "对象是否有长度属性？") 并且定义了该类型的对象可能的取值。
`type()` 函数能返回一个对象的类型 (类型本身也是对象)。与编号一样，一个对象的 **类型** 也是不可改变的。

有些对象的值可以改变。值可以改变的对象被称为**可变对象**；
值不可以改变的对象就被称为**不可变对象**。
(一个不可变容器对象如果包含对可变对象的引用，当后者的值改变时，前者的值也会改变；但是该容器仍属于不可变对象，因为它所包含的对象集是不会改变的。因此，不可变并不严格等同于值不能改变，实际含义要更微妙。)
一个对象的可变性是由其类型决定的；例如，数字、字符串和元组是不可变的，而字典和列表是可变的。

对象绝不会被显式地销毁；然而，当无法访问时它们可能会被作为垃圾回收。
允许具体的实现推迟垃圾回收或完全省略此机制 --- 如何实现垃圾回收是实现的质量问题，只要可访问的对象不会被回收即可。

### 序列

此类对象表示以非负整数作为索引的有限有序集。内置函数 `len()` 可返回一个序列的条目数量。
当一个序列的长度为 `n` 时，索引集包含数字 `0, 1, ..., n-1`。序列 `a` 的条目 `i` 可通过 `a[i]` 选择。

序列还支持切片: `a[i:j]` 选择索引号为 `k` 的所有条目，`i <= k < j`。
当用作表达式时，**序列的切片就是一个与序列类型相同的新序列**。新序列的索引还是从 0 开始。

有些序列还支持带有第三个 "step" 形参的 "扩展切片": `a[i:j:k]` 选择 `a` 中索引号为 `x` 的所有条目，`x = i + n*k, n >= 0` 且 `i <= x < j`。

#### 不可变序列

不可变序列类型的对象一旦创建就不能再改变。
(如果对象包含对其他对象的引用，其中的可变对象就是可以改变的；但是，一个不可变对象所直接引用的对象集是不能改变的。)

以下类型属于不可变对象:

- 字符串
- 元组
- 字节串

#### 可变序列

可变序列在被创建后仍可被改变。下标和切片标注可被用作赋值和 `del` (删除) 语句的目标。

目前有两种内生可变序列类型:

- 列表
- 字节数组

<Callout type="info">
  扩展模块 `array` 提供了一个额外的可变序列类型示例，`collections`
  模块也是如此。
</Callout>


### 集合类型

此类对象表示由不重复且不可变对象组成的无序且有限的集合。
因此它们不能通过下标来索引。但是它们可被迭代，也可用内置函数 `len()` 返回集合中的条目数。
集合常见的用处是快速成员检测，去除序列中的重复项，以及进行交、并、差和对称差等数学运算。

对于集合元素所采用的不可变规则与字典的键相同。
注意数字类型遵循正常的数字比较规则: 如果两个数字相等 (例如 1 和 1.0)，则同一集合中只能包含其中一个。

目前有两种内生集合类型:

- 集合 此类对象表示可变集合。它们可通过内置的 `set()` 构造器创建，并且创建之后可以通过方法进行修改，例如 `add()`。
- 冻结集合 此类对象表示不可变集合。它们可通过内置的 `frozenset()` 构造器创建。由于 `frozenset` 对象不可变且 `hashable`，
它可以被用作另一个集合的元素或是字典的键。

### 映射

此类对象表示由任意索引集合所索引的对象的集合。
通过下标 `a[k]` 可在映射 `a` 中选择索引为 `k` 的条目；
这可以在表达式中使用，也可作为赋值或 `del` 语句的目标。内置函数 `len()` 可返回一个映射中的条目数。

目前只有一种内生映射类型:

- 字典

此类对象表示由几乎任意值作为索引的有限个对象的集合。
不可作为键的值类型只有包含列表或字典或其他可变类型，通过值而非对象编号进行比较的值，
其原因在于高效的字典实现需要使用键的哈希值以保持一致性。
用作键的数字类型遵循正常的数字比较规则: 如果两个数字相等 (例如 1 和 1.0) 则它们均可来用来索引同一个字典条目。

字典会保留插入顺序，这意味着键将以它们被添加的顺序在字典中依次产生。 
替换某个现有的键不会改变其顺序，但是移除某个键再重新插入则会将其添加到末尾而不会保留其原有位置。

字典是可变的；它们可通过 `{...}` 标注来创建 (参见 字典显示 小节)。

